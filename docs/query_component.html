<html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Query Component · Kunyora</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta property="og:title" content="Query Component · Kunyora"/><meta property="og:type" content="website"/><meta property="og:url" content="https://kunyora.github.io/kunyora/index.html"/><meta property="og:description" content="A Query component is a lower level component which you would typically use in making **only** `get reqeusts`, hence the component name `Query`. Queries are typically operations performed on a database which do not cause side effects to the database. The Query component is a component exported from `react-kunyora` which you could use to connect your UI to datas sent by your api. It is also a declarative API which allows you to carry out operations while handling states like loading and error in a declarative manner."/><meta property="og:image" content="https://kunyora.github.io/kunyora/img/tabIcon.png"/><link rel="shortcut icon" href="/kunyora/img/tabIcon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/solarized-dark.min.css"/><link rel="alternate" type="application/atom+xml" href="https://kunyora.github.io/blog/atom.xml" title="Kunyora Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://kunyora.github.io/blog/feed.xml" title="Kunyora Blog RSS Feed"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/kunyora/css/main.css"/></head><body class="sideNavVisible doc"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/kunyora/"><img class="logo" src="/kunyora/img/headerIcon.png"/><h2 class="headerTitle">Kunyora</h2></a><a href="/kunyora/versions.html"><h3>0.1.0</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/kunyora/docs/getting_started.html" target="_self">Docs</a></li><li class=""><a href="/kunyora/en/community.html" target="_self">Community</a></li><li class=""><a href="/kunyora/blog" target="_self">Blog</a></li><li class=""><a href="https://github.com/kunyora/kunyora" target="_self">Github</a></li><li class=""><a href="https://github.com/kunyora/react-kunyora" target="_self">React-Kunyora</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>react-kunyora</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>The Basics</h3><ul><li class="navListItem"><a class="navItem" href="/kunyora/docs/try_it_out.html">Try Kunyora</a></li><li class="navListItem"><a class="navItem" href="/kunyora/docs/getting_started.html">Getting Started</a></li><li class="navListItem"><a class="navItem" href="/kunyora/docs/quick_tutorial.html">Quick Tutorial</a></li><li class="navListItem"><a class="navItem" href="/kunyora/docs/introduction_to_operations.html">Introduction to Operations</a></li><li class="navListItem"><a class="navItem" href="/kunyora/docs/motivation.html">Motivation</a></li><li class="navListItem"><a class="navItem" href="/kunyora/docs/vision.html">Vision</a></li></ul></div><div class="navGroup navGroupActive"><h3>Kunyora</h3><ul><li class="navListItem"><a class="navItem" href="/kunyora/docs/kunyora_tutorial.html">InDepth Tutorial</a></li><li class="navListItem"><a class="navItem" href="/kunyora/docs/kunyora_api_reference.html">API Reference</a></li></ul></div><div class="navGroup navGroupActive"><h3>react-kunyora</h3><ul><li class="navListItem"><a class="navItem" href="/kunyora/docs/kunyora_provider_component.html">KunyoraProvider Component</a></li><li class="navListItem"><a class="navItem" href="/kunyora/docs/kunyora_provider_api_reference.html">KunyoraProvider API Overview</a></li><li class="navListItem navListItemActive"><a class="navItem navItemActive" href="/kunyora/docs/query_component.html">Query Component</a></li><li class="navListItem"><a class="navItem" href="/kunyora/docs/query_component_api_overview.html">Query Api Overview</a></li><li class="navListItem"><a class="navItem" href="/kunyora/docs/mutation_component.html">Mutation Component</a></li><li class="navListItem"><a class="navItem" href="/kunyora/docs/mutation_component_api_overview.html">Mutation Api Overview</a></li><li class="navListItem"><a class="navItem" href="/kunyora/docs/router_component.html">Router Component</a></li><li class="navListItem"><a class="navItem" href="/kunyora/docs/router_component_api_overview.html">Router Api Overview</a></li><li class="navListItem"><a class="navItem" href="/kunyora/docs/connector_component.html">Connector Component</a></li><li class="navListItem"><a class="navItem" href="/kunyora/docs/connector_component_api_overview.html">Connector Api Overview</a></li></ul></div><div class="navGroup navGroupActive"><h3>Contributing</h3><ul><li class="navListItem"><a class="navItem" href="/kunyora/docs/how_to_contribute.html">How to Contribute</a></li><li class="navListItem"><a class="navItem" href="/kunyora/docs/expectations_from_maintainers.html">Expectations from Maintainers</a></li></ul></div><div class="navGroup navGroupActive"><h3>What&#x27;s Next</h3><ul><li class="navListItem"><a class="navItem" href="/kunyora/docs/community_tutorials.html">Community Tutorials</a></li><li class="navListItem"><a class="navItem" href="/kunyora/docs/todos.html">Todos</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/kunyora/kunyora-website/blob/master/docs/query_component.md" target="_blank">Edit</a><h1>Query Component</h1></header><article><div><span><p>A Query component is a lower level component which you would typically use in making <strong>only</strong> <code>get reqeusts</code>, hence the component name <code>Query</code>. Queries are typically operations performed on a database which do not cause side effects to the database. The Query component is a component exported from <code>react-kunyora</code> which you could use to connect your UI to datas sent by your api. It is also a declarative API which allows you to carry out operations while handling states like loading and error in a declarative manner.</p>
<p>In this section of the documentation, we would be creating a very <code>simple notification list application</code>, so sit tight and get your hands ready to practice some query code.</p>
<ul>
<li><a href="/kunyora/docs/query_component.html#creating-a-notification-list-application"><code>Creating a Notification List Application</code></a></li>
<li><a href="/kunyora/docs/query_component.html#creating-the-client"><code>Creating the client</code></a></li>
<li><a href="/kunyora/docs/query_component.html#connecting-to-our-data-using-the-query-component"><code>Connecting to our data using the Query component</code></a></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="creating-a-notification-list-application"></a><a href="#creating-a-notification-list-application" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Creating a Notification List Application</h2>
<p>In this section of the Query tutorial, we would be creating a simple notification listing application which would query our online API to get a list of notification, it would then render the results of this notification in a list. The List would be able to refetch its queries in case there is an error in the network. We shall also provide detailed explanation of the <code>Query props</code> in action.</p>
<h3><a class="anchor" aria-hidden="true" id="creating-the-client"></a><a href="#creating-the-client" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><strong>Creating the client</strong></h3>
<p>Let's go ahead to create the client for our application. We would assume that you are familiar with creating the client already and therefore we would explain other details that you should be aware of when using our library with <code>reactJs</code>. However, if you do not have enough knowledge about creating a <code>client</code>, then check our <a href="/kunyora/docs/kunyora_tutorial.html"><code>indepth tutorial docs</code></a> and the <a href="/kunyora/docs/kunyora_api_reference.html#client-configration">Kunyora Api Reference Configuration section</a>.</p>
<pre><code class="hljs css javascript"><span class="hljs-comment">/**
 * Index.js
 */</span>
<span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> {render} <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dom'</span>;
<span class="hljs-keyword">import</span> KunyoraClient <span class="hljs-keyword">from</span> <span class="hljs-string">'kunyora'</span>;
<span class="hljs-keyword">import</span> {KunyoraProvider} <span class="hljs-keyword">from</span> <span class="hljs-string">'react-kunyora'</span>;
<span class="hljs-keyword">import</span> registerServiceWorker <span class="hljs-keyword">from</span> <span class="hljs-string">'./registerServiceWorker'</span>;

<span class="hljs-keyword">import</span> NotificationList <span class="hljs-keyword">from</span> <span class="hljs-string">'./NotificationList'</span>;

<span class="hljs-keyword">const</span> client = KunyoraClient({
  <span class="hljs-attr">baseURL</span>: <span class="hljs-string">'https://kunyora.herokuapp.com/'</span>,
  <span class="hljs-attr">nouns</span>: [{<span class="hljs-attr">path</span>: <span class="hljs-string">'notification'</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'notification'</span>}],
});

<span class="hljs-keyword">const</span> App = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">KunyoraProvider</span> <span class="hljs-attr">client</span>=<span class="hljs-string">{client}</span> <span class="hljs-attr">store</span>=<span class="hljs-string">{client.store}</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">NotificationList</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">KunyoraProvider</span>&gt;</span></span>
);

render(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span>, document.getElementById('root'));
registerServiceWorker();
</span></code></pre>
<p>The <code>client</code> above is created using just the <code>baseURL</code> and the <code>nouns</code> of the <code>config</code>. When using a view layer like <code>reactJs</code>, there is no need to specify the <code>thenables</code> and <code>catchables</code> properties in your config as <code>react-kunyora</code> automatically handles that for you internally and just feeds your UI with the result sent by the restful Api. Also we created a test url for this application on heroku which we specified in our <code>baseURL</code> property. We would also be connecting to the <code>/notification</code> routes. Then we go ahead to connect our entire application to a top level <a href="/kunyora/docs/kunyora_provider_component.html">KunyoraProvider</a> component while passing in the <code>client</code> instance and the <code>store</code> as props.</p>
<h3><a class="anchor" aria-hidden="true" id="connecting-to-our-data-using-the-query-component"></a><a href="#connecting-to-our-data-using-the-query-component" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><strong>Connecting to our data using the Query component</strong></h3>
<p>Lets connect our UI to the data from the store using a query component. We would cover all the possible scenarios of using the <code>Query</code> component here including a render loading and error component and refetching queries.</p>
<pre><code class="hljs css javascript"><span class="hljs-comment">/**
 * NotificationList.js
 */</span>

<span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> {Query} <span class="hljs-keyword">from</span> <span class="hljs-string">'react-kunyora'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> (NotificationList = <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Query</span>
    <span class="hljs-attr">operation</span>=<span class="hljs-string">"getNotification"</span>
    <span class="hljs-attr">renderError</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">p</span>&gt;</span>An error just occurred<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>}
    renderLoading={<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span> Loading... <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>}
    options={{fetchPolicy: 'network-only'}}&gt;
    {(notifications, fetchMore, refetchQuery) =&gt; [
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{0}</span>&gt;</span>
        {notifications.data.map((notification, i) =&gt; (
          <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{i}</span>&gt;</span>{notification.name}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
        ))}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>,
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{1}</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> refetchQuery()}&gt;
        Refresh List
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>,
    ]}
  <span class="hljs-tag">&lt;/<span class="hljs-name">Query</span>&gt;</span></span>
));
</code></pre>
<p>Notice that the above code uses <code>react fragment api</code> to render 2 children components in the <code>Query</code> component. The code above queries for a list of notification which it displays in a list and then renders a button that can be used to refetch the query. Lets go ahead to explain the props used in this example.</p>
<ul>
<li><p><strong>operation</strong> : This prop is used to specify the command to run. Typically in a <code>get</code> request, it is formed by camel-casing <code>get</code> with the <code>name</code> or <code>path</code> attribute supplied by the user when creating the <code>client</code> and in our case, this is <code>notification</code>. For a full understanding of how <code>operations</code> are formed, please refer to the <a href="introduction_to_operation.md">Introduction to operation Docs</a> section for a more detailed explanation.</p></li>
<li><p><strong>renderError</strong> : This prop is used to render a view in case an error occurred while fetching the query. In our case, we render a text which notifies a user that an error just occured.</p></li>
<li><p><strong>renderLoading</strong> : This prop is used to render a view when the query is in flight. In our case, we render a text <code>loading...</code>.</p></li>
<li><p><strong>options</strong> : This prop helps us to specify the configuration of the application. It accepts an object containing 2 properties; <code>fetchPolicy</code> and <code>config</code>. <code>fetchPolicy</code> can be used to specify a fetching pattern that our application should use while <code>config</code> generally specifies the configuration particular to just the query being sent. In the <code>config</code> property, we can specify <code>get parameters</code> that the application should use along with some other custom parameters. In our case, we specify a <code>network-only</code> fetchPolicy. Please refer to the <a href="/kunyora/docs/query_component_api_overview.html">API reference</a> of this docs.</p></li>
</ul>
<p>Now, lets go ahead to explain the parameters passed to our <code>this.props.children</code> of the <code>Query</code> component.</p>
<ul>
<li><p><strong>notifications</strong> : This is an object which contains the <code>error</code>, <code>loading</code> and the <code>data</code> entities for our query. The <code>error</code> and <code>loading</code> value of the <code>Query</code> component are passed in case you choose to handle error and loading manually yourself within the application instead of using the <code>renderError</code> and the <code>renderLoading</code> props. <code>notifications.data</code> on the other hand, contains the data which has been sent back by your api probably in .json format. In our case, the <code>notification.data</code> contains the list of notifications stored in our online database.</p></li>
<li><p><strong>fetchMore</strong> : This is a function used to fetch more results</p></li>
<li><p><strong>refetchQuery</strong> : This is a function used to refetch a query</p></li>
</ul>
<p>The <code>Query</code> component also uses a lot of other props such as the <code>skip</code> props to skip queries, and the <code>notification.data</code> property also contains an <code>isInitialDataSet</code> boolean field which can tell your application if an initial data has been loaded before by the query or not.</p>
<p>Please refer to the <a href="/kunyora/docs/query_component_api_overview.html">Query Api Overview</a> section of this docs for more details on the <code>Query</code> component.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="kunyora_provider_api_reference.html">← KunyoraProvider API Overview</a><a class="docs-next button" href="query_component_api_overview.html">Query Api Overview →</a></div></div></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/kunyora/" class="nav-home"><img src="/kunyora/img/headerIcon.png" alt="Kunyora" width="66" height="58"/></a><div><h5>Docs</h5><a href="/kunyora/docs/en/getting_started.html">Getting Started</a><a href="/kunyora/docs/en/quick_tutorial.html">Tutorial</a><a href="/kunyora/docs/en/kunyora_api_reference.html">API Reference</a><a href="/kunyora/docs/en/how_to_contribute.html">Contributing</a></div><div><h5>Community</h5><a href="#" target="_blank">Stack Overflow</a><a href="https://github.com/kunyora/kunyora/issues">Report a bug on github</a></div><div><h5>More</h5><a href="/kunyora/blog">Blog</a><a href="https://github.com/kunyora/kunyora">GitHub</a><a class="github-button" href="https://github.com/kunyora/kunyora" data-icon="octicon-star" data-count-href="/kunyora/kunyora/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-117938006-1', 'auto');
              ga('send', 'pageview');
            </script><script>
              var search = docsearch({
                
                apiKey: 'd39fbbb67f85db6ed167f93a427b9456',
                indexName: 'kunyora',
                inputSelector: '#search_input_react'
              });
            </script></body></html>